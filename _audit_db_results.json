{
  "connection": {
    "method": "Supabase JS SDK",
    "url": "https://bwzyajsrmfhrxdmfpyqy.supabase.co"
  },
  "migration_logs": [
    {
      "id": "4ec201dd-4158-4bad-8681-4af14ed61f69",
      "migration_name": "2025-12-20_migration_locataires_contraintes",
      "executed_at": "2025-12-20T06:31:33.614956+00:00",
      "description": "Application NOT NULL sur profile_id, logement_id, date_entree + ON DELETE RESTRICT"
    },
    {
      "id": "905fe727-3063-4937-828c-3beb88fa1a99",
      "migration_name": "2025-12-20_rls_locataires_policies",
      "executed_at": "2025-12-20T06:31:57.1975+00:00",
      "description": "Refonte policies locataires : séparation SELECT/INSERT/UPDATE/DELETE + policies restrictives locataire sur logements/immeubles"
    },
    {
      "id": "54205656-7fce-4ced-9147-068c80923250",
      "migration_name": "2025-12-20_rpc_creer_locataire",
      "executed_at": "2025-12-20T06:32:14.976718+00:00",
      "description": "Création RPC creer_locataire_complet() et liberer_logement_locataire() avec transaction atomique"
    },
    {
      "id": "119d4a6e-9654-400a-b371-93abd3416f0d",
      "migration_name": "2025-12-20_rpc_creer_locataire",
      "executed_at": "2025-12-23T12:42:04.71986+00:00",
      "description": "Création RPC creer_locataire_complet() et liberer_logement_locataire() avec transaction atomique"
    },
    {
      "id": "60de31b8-483c-453a-944f-40f09ea59134",
      "migration_name": "20251224000000_fix_logement_id_nullable",
      "executed_at": "2025-12-24T12:03:44.020022+00:00",
      "description": "Correctif : DROP NOT NULL sur locataires.logement_id (erreur migration 2025-12-20)"
    },
    {
      "id": "c38db902-9003-4d78-ac28-cde67f4f5350",
      "migration_name": "20251224000001_logements_adresse_caracteristiques",
      "executed_at": "2025-12-24T14:35:06.250174+00:00",
      "description": "Ajout colonnes adresse + caractéristiques + propriétaire pour logements"
    },
    {
      "id": "76b3f021-f051-4e53-a1ee-5eb5d3f39f36",
      "migration_name": "20251224000002_immeubles_npa_suisse_caracteristiques",
      "executed_at": "2025-12-24T14:37:41.346176+00:00",
      "description": "Adaptation format NPA suisse + ajout colonnes type_immeuble, description, pays, proprietaire_id"
    }
  ],
  "tables_info": [
    {
      "table_name": "profiles",
      "row_count": 0
    },
    {
      "table_name": "regies",
      "row_count": 0
    },
    {
      "table_name": "immeubles",
      "row_count": 0
    },
    {
      "table_name": "logements",
      "row_count": 0
    },
    {
      "table_name": "locataires",
      "row_count": 0
    },
    {
      "table_name": "tickets",
      "row_count": 0
    },
    {
      "table_name": "missions",
      "row_count": 0
    },
    {
      "table_name": "entreprises",
      "row_count": 0
    },
    {
      "table_name": "regies_entreprises",
      "row_count": 0
    },
    {
      "table_name": "tickets_disponibilites",
      "row_count": 0
    },
    {
      "table_name": "tickets_visibles_entreprise",
      "row_count": 1
    },
    {
      "table_name": "migration_logs",
      "row_count": 7
    }
  ],
  "rls_analysis": {
    "profiles": {
      "accessible": true,
      "count": 0,
      "error": null
    },
    "tickets": {
      "accessible": true,
      "count": 0,
      "error": null
    },
    "missions": {
      "accessible": true,
      "count": 0,
      "error": null
    },
    "entreprises": {
      "accessible": true,
      "count": 0,
      "error": null
    },
    "regies_entreprises": {
      "accessible": true,
      "count": 0,
      "error": null
    }
  },
  "mode_diffusion_analysis": {
    "tickets_values": {},
    "regies_entreprises_values": {},
    "rpc_available": false
  },
  "tickets_analysis": {
    "accessible": false,
    "error": "invalid input value for enum ticket_status: \"diffuse\""
  }
}