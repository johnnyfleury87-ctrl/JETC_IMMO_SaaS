section,column_name,data_type,is_nullable,column_default
columns,id,uuid,NO,uuid_generate_v4()
columns,titre,text,NO,null
columns,description,text,NO,null
columns,categorie,text,NO,null
columns,priorite,text,YES,'normale'::text
columns,statut,USER-DEFINED,NO,'nouveau'::ticket_status
columns,logement_id,uuid,NO,null
columns,locataire_id,uuid,NO,null
columns,regie_id,uuid,NO,null
columns,entreprise_id,uuid,YES,null
columns,technicien_id,uuid,YES,null
columns,date_creation,timestamp with time zone,YES,now()
columns,date_cloture,timestamp with time zone,YES,null
columns,date_limite,timestamp with time zone,YES,null
columns,photos,ARRAY,YES,null
columns,urgence,boolean,YES,false
columns,created_at,timestamp with time zone,YES,now()
columns,updated_at,timestamp with time zone,YES,now()
columns,locked_at,timestamp with time zone,YES,null
columns,plafond_intervention_chf,numeric,YES,0
columns,devise,text,NO,'CHF'::text
columns,mode_diffusion,text,YES,null
columns,sous_categorie,text,YES,null
columns,piece,text,YES,null
"check_constraint,check_categorie,null,null,""CHECK ((categorie = ANY (ARRAY['plomberie'::text, 'électricité'::text, 'chauffage'::text, 'serrurerie'::text, 'vitrerie'::text, 'menuiserie'::text, 'peinture'::text, 'autre'::text])))"""
check_constraint,check_dates,null,null,CHECK (((date_cloture IS NULL) OR (date_cloture >= date_creation)))
check_constraint,check_devise_chf,null,null,CHECK ((devise = 'CHF'::text))
"check_constraint,check_piece_valide,null,null,""CHECK (((piece IS NULL) OR (lower(piece) = ANY (ARRAY['cuisine'::text, 'salle_de_bain'::text, 'chambre'::text, 'salon'::text, 'wc'::text, 'entree'::text, 'couloir'::text, 'balcon'::text, 'cave'::text, 'garage'::text, 'exterieur'::text, 'parties_communes'::text, 'autre'::text]))))"""
check_constraint,check_plafond_positif,null,null,CHECK ((plafond_intervention_chf >= (0)::numeric))
"check_constraint,check_priorite,null,null,""CHECK ((priorite = ANY (ARRAY['faible'::text, 'normale'::text, 'haute'::text, 'urgente'::text])))"""
"check_constraint,check_sous_categorie_valide,null,null,""CHECK (((sous_categorie IS NULL) OR ((categorie = 'plomberie'::text) AND (sous_categorie = ANY (ARRAY['Fuite d''eau'::text, 'WC bouché'::text, 'Chauffe-eau'::text, 'Robinetterie'::text, 'Autre plomberie'::text]))) OR ((categorie = 'electricite'::text) AND (sous_categorie = ANY (ARRAY['Panne générale'::text, 'Prise défectueuse'::text, 'Interrupteur'::text, 'Éclairage'::text, 'Autre électricité'::text]))) OR ((categorie = 'chauffage'::text) AND (sous_categorie = ANY (ARRAY['Radiateur'::text, 'Chaudière'::text, 'Thermostat'::text, 'Autre chauffage'::text]))) OR ((categorie = 'ventilation'::text) AND (sous_categorie = ANY (ARRAY['VMC défectueuse'::text, 'Grille cassée'::text, 'Bruit anormal'::text, 'Autre ventilation'::text]))) OR ((categorie = 'serrurerie'::text) AND (sous_categorie = ANY (ARRAY['Porte bloquée'::text, 'Clé perdue'::text, 'Verrou défectueux'::text, 'Autre serrurerie'::text]))) OR ((categorie = 'vitrerie'::text) AND (sous_categorie = ANY (ARRAY['Vitre cassée'::text, 'Double vitrage'::text, 'Autre vitrerie'::text]))) OR ((categorie = 'menuiserie'::text) AND (sous_categorie = ANY (ARRAY['Porte'::text, 'Fenêtre'::text, 'Parquet'::text, 'Autre menuiserie'::text]))) OR ((categorie = 'peinture'::text) AND (sous_categorie = ANY (ARRAY['Murs'::text, 'Plafond'::text, 'Boiseries'::text, 'Autre peinture'::text]))) OR ((categorie = 'autre'::text) AND (sous_categorie = 'Autre intervention'::text))))"""
